{% extends "app-base.html" %}
{% load staticfiles %}

{% block page_title %}
	Page List - {{ block.super }}
{% endblock page_title %}

{% block content %}
<h1>Manage Pages</h1>

<form action="/flatterpages/search/" method="get">
	<label for="id_q">Search:</label>
	<input id="id_q" name="q" type="text">
	<input type="submit" value="Submit">
</form>

<a href="{% url flatterpages.views.create_page %}">Create New Page</a>

<table>
	<thead>
		<tr>
			<th>Title</th>
			<th>URL</th>
			<th>Last Updated</th>
			<th>Actions</th>
		</tr>
	</thead>
	<tbody>
		{% for page in pages %}
		<tr>
			<td><a href="{% url flatterpages.views.edit_page page.url %}">{{ page.title }}</a></td>
			<td><a href="{% url flatterpages.views.render_page page.url %}" title="">/{{ page.url }}/</a></td>
			<td>{{ page.updated }}</td>
			{% comment %}<td><a class="destructive-action" data-page-url="{{ page.url}}" title="">Delete</a></td>{% endcomment %}
			<td><a href="{% url flatterpages.views.create_sub_page page.url %}" title="">Create Sub-page</a></td>
		</tr>
		{% endfor %}
	</tbody>
</table>


{% for page in pages %}
<ul>
	{% if not page.parent_page %}
		<li>{{ page }}</li>
		{% for page in page.page_set.all %}
		<ul>
			<li>{{ page }}</li>
		</ul>
		{% endfor %}
	{% endif %}
</ul>
{% endfor %}


{% endblock content %}
